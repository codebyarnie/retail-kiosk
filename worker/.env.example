# Retail Kiosk Worker - Environment Configuration Example
# Copy this file to .env and update the values as needed
# All variables are prefixed with RETAIL_KIOSK_ when loaded

# =============================================================================
# Application Settings
# =============================================================================
RETAIL_KIOSK_APP_NAME=Retail Kiosk Worker
RETAIL_KIOSK_APP_VERSION=0.1.0
RETAIL_KIOSK_DEBUG=false
RETAIL_KIOSK_ENVIRONMENT=development

# =============================================================================
# Celery Settings (Task Queue)
# =============================================================================
# Using Redis as broker and result backend with different databases
RETAIL_KIOSK_CELERY_BROKER_URL=redis://localhost:6379/1
RETAIL_KIOSK_CELERY_RESULT_BACKEND=redis://localhost:6379/2
RETAIL_KIOSK_CELERY_TASK_SERIALIZER=json
RETAIL_KIOSK_CELERY_RESULT_SERIALIZER=json
RETAIL_KIOSK_CELERY_ACCEPT_CONTENT=json
RETAIL_KIOSK_CELERY_TIMEZONE=UTC
RETAIL_KIOSK_CELERY_ENABLE_UTC=true
RETAIL_KIOSK_CELERY_TASK_TRACK_STARTED=true

# Task execution limits (in seconds)
RETAIL_KIOSK_CELERY_TASK_TIME_LIMIT=3600
RETAIL_KIOSK_CELERY_TASK_SOFT_TIME_LIMIT=1800

# Worker performance settings
RETAIL_KIOSK_CELERY_WORKER_PREFETCH_MULTIPLIER=4
RETAIL_KIOSK_CELERY_WORKER_MAX_TASKS_PER_CHILD=1000

# =============================================================================
# Redis Settings (for caching and task locking)
# =============================================================================
# For local development with docker-compose
RETAIL_KIOSK_REDIS_URL=redis://localhost:6379/0
RETAIL_KIOSK_REDIS_MAX_CONNECTIONS=50
RETAIL_KIOSK_REDIS_SOCKET_TIMEOUT=5
RETAIL_KIOSK_REDIS_SOCKET_CONNECT_TIMEOUT=5

# =============================================================================
# Database Settings (PostgreSQL)
# =============================================================================
# For local development with docker-compose
# Worker uses sync driver for simplicity in background tasks
RETAIL_KIOSK_DATABASE_URL=postgresql://postgres:postgres@localhost:5432/retail_kiosk
RETAIL_KIOSK_DATABASE_POOL_SIZE=5
RETAIL_KIOSK_DATABASE_MAX_OVERFLOW=10
RETAIL_KIOSK_DATABASE_ECHO=false

# =============================================================================
# Qdrant Settings (Vector Database)
# =============================================================================
# For local development with docker-compose
RETAIL_KIOSK_QDRANT_HOST=localhost
RETAIL_KIOSK_QDRANT_PORT=6333
RETAIL_KIOSK_QDRANT_GRPC_PORT=6334
# RETAIL_KIOSK_QDRANT_API_KEY=your-api-key-here  # Optional, uncomment if needed
RETAIL_KIOSK_QDRANT_PREFER_GRPC=false

# =============================================================================
# Logging Settings
# =============================================================================
# Levels: DEBUG, INFO, WARNING, ERROR, CRITICAL
RETAIL_KIOSK_LOG_LEVEL=INFO
RETAIL_KIOSK_LOG_ROTATION=500 MB
RETAIL_KIOSK_LOG_RETENTION=10 days

# =============================================================================
# Task-Specific Settings
# =============================================================================
# Product synchronization interval (in seconds)
RETAIL_KIOSK_PRODUCT_SYNC_INTERVAL=3600

# Image optimization settings
RETAIL_KIOSK_IMAGE_OPTIMIZATION_QUALITY=85
RETAIL_KIOSK_MAX_CONCURRENT_IMAGE_TASKS=5
